<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Sprite</title>
  </head>

  <body>
    <canvas
      id="myCanvas"
      width="300"
      height="300"
      style="border: solid 3px blue"
    >
      Your browser does not support HTML5 Canvas.
    </canvas>
    <script>
      const canvas = document.querySelector("#myCanvas");
      const ctx = canvas.getContext("2d");

      const W = canvas.width,
        H = canvas.height;

      let image = new Image();
      image.src = "images/sprite.png";

      let bgImg = new Image();
      bgImg.src = "images/bg.png";

      image.onload = function () {
        setInterval(render, 1000 / 15); //start animation AFTER image load! - 15 fps
      };

      //sprite frame counter
      let frameIndex = 0;
      let bgX = 0;

      function render() {
        /* ctx.clearRect(0, 0, W, H); */

        ctx.drawImage(bgImg, bgX++, 0, W, H);
        ctx.drawImage(bgImg, bgX - W, 0, W, H);

        if (bgX - W >= 0) {
          bgX = 0;
        }

        ctx.drawImage(
          image,
          0,
          frameIndex * 100,
          100,
          100,
          W / 2 - 50,
          H / 2 + 25,
          100,
          100
        );

        //EX1
        /* ctx.drawImage( 
          image,
          0,
          frameIndex * 100,
          100,
          100,
          W / 2 - 50,
          H / 2 - 50,
          100,
          100
        ); */

        frameIndex++;
        if (frameIndex == 5) frameIndex = 0; //reset the number of frames counter
      }
    </script>
  </body>
</html>
